<!doctype html>
<html>
  <head>

    {% include head.html %}

    {% case page.category %}
      {% when "Comics" %}
        <link rel="stylesheet" href="{{ site.url }}/assets/css/comic.css">
      {% when "Articles" %}
        <link rel="stylesheet" href="{{ site.url }}/assets/css/article.css">
      {% when "Videos" %}
        <link rel="stylesheet" href="{{ site.url }}/assets/css/video.css">
      {% when "Junk" %}
        <link rel="stylesheet" href="{{ site.url }}/assets/css/junk.css">
    {% endcase %}

    {% if page.custom_styles %}
      <link rel="stylesheet" href="{{ site.url }}{{ page.custom_styles }}">
    {% endif %}

    {% if page.custom_scripts %}
      <script src="{{ site.url }}{{ page.custom_scripts }}"></script>
    {% endif %}

  </head>

  <body>

    <article class="post">
      {% include page_header.html %}

      <div class="container content-wrap" role="main">
        {% if page.image.feature %}
          {% assign retinaFeature = page.image.feature | split: "" | reverse | join: "" | replace_first: '.', '.x2@' | split: "" | reverse | join: "" %}
          <img class="feature" src="{{ page.image.feature }}" srcset="{{ retinaFeature }} 2x" title="{{ page.image.imageHover }}" />
        {% endif %}

        {% if page.category == "Comics" %}
          {% include comic-nav.html %}
        {% endif %}

        {{ content }}        
      </div>
    </article>

    <div class="post-content">
      <div class="wrap tags">
        <div class="container" role="complementary" aria-labelledby="tags-title">
          <div class="row">
            <div class="col-1">
              <h4 id="tags-title">Tags</h4>
            </div>
            <div class="col-11">
              {% for tag in page.tags %}
                <a href="#" class="tag badge badge-primary"><i class="fas fa-tag"></i> {{ tag }}</a>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
      <div class="wrap related">
        <div class="container clearfix" role="complementary" aria-labelledby="related-title">
          <h4 id="related-title">Related Posts</h4>
          {% for post in site.posts limit:40 %}
            <div class="related-post">

              {% case post.category %}
                {% when "Comics" %}
                  {% assign taghtml = '<span class="badge badge-primary comics">Comic</span> ' %}
                {% when "Articles" %}
                  {% assign taghtml = '<span class="badge badge-primary articles">Article</span> ' %}
                {% when "Videos" %}
                  {% assign taghtml = '<span class="badge badge-primary videos">Video</span> ' %}
                {% when "Junk" %}
                  {% assign taghtml = '<span class="badge badge-primary junk">Junk</span> ' %}
              {% endcase %}

              {% if post.image.headliner %}
                {% assign postImage = post.image.headliner %}
                {% assign imageType = 'AUTO' %}
              {% elsif post.image.thumbnail %}
                {% assign postImage = post.image.thumbnail %}
                {% assign imageType = 'THUMB' %}
              {% else %}
                {% if post.image.feature %}
                  {% assign postImage = post.image.feature %}
                  {% assign imageType = 'AUTO' %}
                {% else %}
                  {% assign postImage = '/assets/img/headliner_default.png' %}
                  {% assign imageType = 'DEFAULT' %}
                {% endif %}
              {% endif %}

              {% assign retinaImage = postImage | split: "" | reverse | join: "" | replace_first: '.', '.x2@' | split: "" | reverse | join: "" %}

              <img src="{{ postImage }}" srcset="{{ retinaImage }}" {% if imageType == 'AUTO' %}class="auto-thumbnail" {% endif %}/>

              <div class="details-holster">
                <div>
                  <h5><a class="stretched-link" href="{{ site.url }}{{ post.url }}" title="{{ post.title }}">{{ post.title }}</a></h5>
                  <p>{{ taghtml }}<time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%B %d, %Y" }}</time></p>
                  <p>{{ post.tagline }}</p>
                </div>
              </div>
            </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <footer>
      {% include footer.html %}
    </footer>
  </body>
</html>